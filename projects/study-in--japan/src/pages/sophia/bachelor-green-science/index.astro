---
/* ⚠️ AUTO-GENERATED — DO NOT EDIT BY HAND. */
const program = {
  "Program_inLanguage": [
    {
      "Created By": "admin_user_stackableeducation_test",
      "Created Date": "2023-11-16T19:44:46.748Z",
      "Language_code": "EN",
      "Language_name": "English",
      "Modified Date": "2023-11-16T19:44:46.748Z",
      "_id": "1700163886748x344845539640834520"
    }
  ],
  "Program_programType": "Bachelor's degree",
  "Program_educationalCredentialAwarded": "Bachelor of Science in Materials and Life Sciences",
  "Program_occupationalCategory": [
    {
      "Modified Date": "2025-07-04T07:33:41.485Z",
      "_id": "1751614421485x840412438705569500",
      "Occupation_name": "19-1029.04 - Biologists",
      "Created Date": "2025-07-04T07:33:41.485Z",
      "Created By": "admin_user_stackableeducation_test"
    },
    {
      "Created Date": "2025-07-04T07:33:42.173Z",
      "Occupation_name": "25-1052.00 - Chemistry Teachers, Postsecondary",
      "_id": "1751614422173x438857348307525760",
      "Created By": "admin_user_stackableeducation_test",
      "Modified Date": "2025-07-04T07:33:42.173Z"
    },
    {
      "Created By": "admin_user_stackableeducation_test",
      "Modified Date": "2025-07-04T07:33:42.173Z",
      "Occupation_name": "19-2031.00 - Chemists",
      "Created Date": "2025-07-04T07:33:42.173Z",
      "_id": "1751614422173x627496860162408100"
    },
    {
      "Modified Date": "2025-07-04T07:33:43.359Z",
      "Occupation_name": "13-1041.01 - Environmental Compliance Inspectors",
      "_id": "1751614423359x998945459121293200",
      "Created Date": "2025-07-04T07:33:43.359Z",
      "Created By": "admin_user_stackableeducation_test"
    },
    {
      "Modified Date": "2025-07-04T07:33:43.360Z",
      "Created Date": "2025-07-04T07:33:43.360Z",
      "Created By": "admin_user_stackableeducation_test",
      "_id": "1751614423360x390043152965522400",
      "Occupation_name": "17-2081.00 - Environmental Engineers"
    },
    {
      "Occupation_name": "17-3025.00 - Environmental Engineering Technologists and Technicians",
      "Created Date": "2025-07-04T07:33:43.360Z",
      "_id": "1751614423360x546953692588357400",
      "Created By": "admin_user_stackableeducation_test",
      "Modified Date": "2025-07-04T07:33:43.360Z"
    }
  ],
  "Program_CourseInstance": [
    {
      "Program": "1753778744358x235836877172637700",
      "Created Date": "2025-07-29T08:46:30.846Z",
      "Program_courseInstance_startDate": "2026-08-31T23:00:00.000Z",
      "_id": "1753778790562x303272633571213300",
      "Created By": "1711122671403x176776188326891680",
      "Program_courseInstance_endDate": "2030-07-29T23:00:00.000Z",
      "Program_courseInstance_courseMode": "https://schema.org/FullTime",
      "Modified Date": "2025-07-29T08:46:30.846Z"
    }
  ],
  "Program_educationalProgramMode": "https://schema.org/FullTime",
  "Created By": "1711122671403x176776188326891680",
  "Created Date": "2025-07-29T08:45:44.578Z",
  "Program_name": "BSc in Green Science",
  "Program_provider": {
    "Provider_postalCode": "102-0094",
    "Provider_alumni_count": 3,
    "Created By": "1711122671403x176776188326891680",
    "Provider_photo": "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1e/Sophia_University_Yotsuya_Campus3.jpg/250px-Sophia_University_Yotsuya_Campus3.jpg",
    "Provider_sameAs": [
      "https://en.wikipedia.org/wiki/Sophia_University",
      "https://www.instagram.com/sophia.university/",
      "https://www.linkedin.com/school/sophiauniv/"
    ],
    "Provider_url": "https://www.sophia.ac.jp/eng/",
    "Provider_name": "Sophia University",
    "Provider_CanonicalDomainEN": [
      {
        "_id": "1752267634773x487077530070184800",
        "Domain": "study-in--japan.com"
      },
      {
        "_id": "1752267634774x255629930112750050",
        "Domain": "etudier-au--japon.com"
      },
      {
        "_id": "1752267634774x950899466160611300",
        "Domain": "study-in--tokyo.com"
      }
    ],
    "Provider_subjectOf_count": 3,
    "Created Date": "2025-07-15T18:58:44.112Z",
    "Provider_MarketingCopy": "?",
    "Provider_Alumni": [
      "1752646572518x679385551313305600",
      "1752647704612x388819002966671360",
      "1752732548332x562637939050020860"
    ],
    "Provider_slug": "sophia",
    "Provider_addressLocality": "Tokyo",
    "Modified Date": "2025-08-07T18:28:57.960Z",
    "Provider_description": "Sophia University is a private Jesuit university in Tokyo, Japan, founded in 1913. It offers undergraduate and graduate programs in English and Japanese across liberal arts, global studies, science, and engineering.",
    "Provider_addressCountry": "1699626478679x607806797389143200",
    "Provider_logo": "https://upload.wikimedia.org/wikipedia/en/thumb/c/cb/Sophia_University_emblem.png/250px-Sophia_University_emblem.png",
    "Provider_subjectOf": [
      "1752643824395x141109801524133890",
      "1752647241963x994304900229234700",
      "1752647312022x827509945920913400"
    ],
    "Provider_streetAddress": "7‑1 Kioicho, Chiyoda‑ku",
    "Location identifier": "Branch",
    "_id": "1752605923067x193519879909802000"
  },
  "Program_description": "Green Science program, offered by Department of Materials and Life Sciences, is designed to train the students on the fundamentals of chemistry and biology, and to teach them to apply this knowledge to overcome environmental issues.",
  "Modified Date": "2025-08-07T12:46:41.503Z",
  "Program_timeToComplete": "P4Y",
  "Program_url": "www",
  "Program_provider_slug_flat": "sophia",
  "_id": "1753778744358x235836877172637700",
  "Program_provider_name_flat": "Sophia University",
  "Program_slug": "bachelor-green-science",
  "Program_educationalLevel": "https://schema.org/Bachelors",
  "Program_subjectOf": [],
  "Program_offer": []
};
const provider = program.Program_provider;
const canonicalUrl = "https://study-in--japan.com/sophia/bachelor-green-science/";

// Helper fns in PLAIN JS (no TS types) to avoid build errors
function isIdLike(s) {
  return typeof s === 'string' && /\d{10,}x[0-9a-z]+/i.test(s);
}
function currencyFromOffer(offer) {
  return offer.Offer_priceCurrency ?? offer.Offer_PriceCurrency;
}
function getCurrencyCode(cur) {
  if (!cur) return undefined;
  if (typeof cur === 'string') {
    if (/^[A-Z]{3}$/.test(cur)) return cur;     // ISO like "JPY"
    if (isIdLike(cur)) return undefined;        // looks like a Bubble ID → don't leak
    return cur;                                 // fallback text like "Yen"
  }
  return cur.Code || cur.Name || cur.Country || undefined;
}

// JSON-LD schema builder (runs inside Astro)
const schema = {
  "@context": "https://schema.org",
  "@type": "EducationalOccupationalProgram",
  "@id": canonicalUrl,
  "mainEntityOfPage": canonicalUrl,
  "name": program.Program_name,
  "description": program.Program_description,
  "programType": program.Program_programType || undefined,
  "timeToComplete": program.Program_timeToComplete || undefined,
  "educationalCredentialAwarded": program.Program_educationalCredentialAwarded || undefined,
  "educationalLevel": program.Program_educationalLevel || undefined,
  "educationalProgramMode": program.Program_educationalProgramMode || undefined,
  "inLanguage": (program.Program_inLanguage ?? []).map(l => typeof l === "string" ? l : l.Language_name).filter(Boolean),
  "occupationalCategory": (program.Program_occupationalCategory ?? []).map(o => typeof o === "string" ? o : o.Occupation_name).filter(Boolean),
  "sameAs": program.Program_mainEntityOfPage_sameAs ?? [],
  "url": program.Program_url || undefined,
  "provider": {
    "@type": "CollegeOrUniversity",
    "name": provider?.Provider_name,
    "url": provider?.Provider_url || undefined,
    "description": provider?.Provider_description || undefined,
    "address": {
      "@type": "PostalAddress",
      "addressLocality": provider?.Provider_addressLocality || undefined,
      "postalCode": provider?.Provider_postalCode || undefined,
      "streetAddress": provider?.Provider_streetAddress || undefined
    }
  },
  "offers": (program.Program_offer ?? []).map(o =>
    typeof o === "string"
      ? { "@type": "Offer", "@id": o }
      : {
          "@type": "Offer",
          "name": o.Offer_name || undefined,
          "description": o.Offer_description || undefined,
          "price": o.Offer_price ?? undefined,
          "priceCurrency": getCurrencyCode(currencyFromOffer(o)),
          "validThrough": o.Offer_validThrough || undefined
        }
  )
};

// strip undefined keys so the JSON-LD is clean
const clean = (obj) => JSON.parse(JSON.stringify(obj, (_k, v) => (v === undefined ? undefined : v)));

// ✅ SAFELY SERIALIZE JSON-LD FOR INLINE SCRIPT
const jsonLdObj = clean(schema);
const jsonLd = JSON.stringify(jsonLdObj)
  .replace(/</g, '\u003C')
  .replace(/>/g, '\u003E')
  .replace(/&/g, '\u0026')
  .replace(/\u2028/g, '\\u2028')
  .replace(/\u2029/g, '\\u2029')
  .replace(/<\/script/gi, '<\\/script');
---
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>{program.Program_name}</title>
    <link rel="canonical" href="https://study-in--japan.com/sophia/bachelor-green-science/" />
    <script type="application/ld+json" set:html={jsonLd}></script>
  </head>
  <body>
    <h1>{program.Program_name}</h1>
    <p>{program.Program_description}</p>

    <p><strong>Disciplines:</strong></p>
    <ul>
      <li>None listed</li>
    </ul>

    <p><strong>Slug:</strong> {program.Program_slug}</p>
    <p><strong>Credential:</strong> {program.Program_educationalCredentialAwarded}</p>
    <p><strong>Level:</strong> {program.Program_educationalLevel}</p>
    <p><strong>Mode:</strong> {program.Program_educationalProgramMode}</p>
    <p><strong>Program Type:</strong> {program.Program_programType}</p>
    <p><strong>Time to Complete:</strong> {program.Program_timeToComplete}</p>

    <p><strong>Educational Prerequisites:</strong></p>
    <ul>
      <li>None listed</li>
    </ul>

    <p><strong>Languages:</strong> English</p>
    <p><strong>Occupational Categories:</strong> 19-1029.04 - Biologists, 25-1052.00 - Chemistry Teachers, Postsecondary, 19-2031.00 - Chemists, 13-1041.01 - Environmental Compliance Inspectors, 17-2081.00 - Environmental Engineers, 17-3025.00 - Environmental Engineering Technologists and Technicians</p>
    <p><strong>Program URL:</strong> <a href="{program.Program_url}">{program.Program_url}</a></p>

    <p><strong>sameAs(URL):</strong></p>
    <ul>
      <li>None listed</li>
    </ul>

    <p><strong>subjectOf:</strong> </p>

    <p><strong>Instances:</strong></p>
    <ul>
      <li>https://schema.org/FullTime</li>
    </ul>

    <p><strong>Offers:</strong></p>
    <ul>
      <li>None listed</li>
    </ul>

    <hr />
    <h2>Provider: <a href="/sophia/">Sophia University</a></h2>
    <p>{provider.Provider_description}</p>
    <p><strong>Slug:</strong> {provider.Provider_slug}</p>
    <p><strong>Canonical Domains:</strong> study-in--japan.com, etudier-au--japon.com, study-in--tokyo.com</p>
  </body>
</html>